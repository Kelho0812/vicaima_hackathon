{% extends 'base.html' %}

{% block content %}
	<h1>Lista de Avaliação</h1>
	<br/>
	<!-- <h5>{{evals.first.id_event}}</h5> -->
	<h5>Evento 1</h5>
	<br/>
	<table class="table">
	  <thead>
		<tr>
		  <th>Colaborador</th>
		  <th tabindex="0" data-toggle="tooltip" data-placement="top" 
		  		  title="Avalia a presença efetiva no posto de trabalho e o respeito 
pelos horários estabelecidos." style="font-weight: normal;"><b>Assiduidade</b><br/>(faltas justificadas)</th>
		  <th tabindex="0" data-toggle="tooltip" data-placement="top" 
		  		  title="Avalia a presença efetiva no posto de trabalho e o respeito 
pelos horários estabelecidos." style="font-weight: normal;"><b>Assiduidade</b><br/>(faltas injustificadas)</th>
		  <th tabindex="0" data-toggle="tooltip" data-placement="top" 
			title="Observa sistematicamente os regulamentos e regras da Vicaima, 
nomeadamente no âmbito da higiene e segurança no trabalho, 
organização e limpeza; assim como revela capacidade de 
utilizar as ferramentas de que dispõe de forma a não haver 
desperdícios de material.">
			Responsabilidade
			</th>
		  <th tabindex="0" data-toggle="tooltip" data-placement="top" 
		  title="Demonstra disponibilidade para aceitar trabalho suplementar assim como 
iniciativa na resolução de problemas não previstos.">Disponibilidade</th>
		  <th tabindex="0" data-toggle="tooltip" data-placement="top" 
		  title="Capacidade para aplicar os conhecimentos e técnicas de trabalho essenciais 
para o desempenho das suas tarefas, assim como a preocupação de se manter atualizado 
e procurar oportunidades de desenvolvimento profissional.">Conhecimento</th>
		  <th tabindex="0" data-toggle="tooltip" data-placement="top" 
		  title="Apresenta volume e qualidade de trabalho num intervalo de tempo satisfatório.">
		  Produtividade</th>
		  <th>Resultado</th>
		  <th>Classificação</th>
		</tr>
	  </thead>
	  <tbody>
		<!-- {% for eval in evals %}
			<tr>
			<td width="200">{{eval.id_evaluated.fname}} {{eval.id_evaluated.lname}}</td>
			<td><input type="number" class="form-control criteria-input" data-user="user1" data-criteria="criteria1" min="1" max="3"></td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Satisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Excelente</option>
			</select></td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Satisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Excelente</option>
			</select></td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Insatisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Eficaz</option>
				<option value="3">4 - Muito eficaz</option>
			</select></td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Insatisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Eficaz</option>
				<option value="3">4 - Muito eficaz</option>
			</select></td>
			<td class="total-column">0</td>
			</tr>
		{% endfor %} -->
		<tr>
		  <td width="200" class="name-column">Joao Almeida</td>
		  <td><select class="form-select" aria-label="Default select example" onchange="onload()">
			<option selected value="0">0 - Onze ou mais faltas justificadas</option>
			<option value="1">1 - Até dez faltas justificadas</option>
			<option value="3">3 - Zero faltas justificadas</option>
			</select></td>
		<td><select class="form-select" aria-label="Default select example" onchange="onload()">
			<option selected value="0">0 - Três  ou mais faltas injustificadas</option>
			<option value="1">1 - Até duas faltas injustificadas</option>
			<option value="3">3 - Zero faltas injustificadas</option>
			</select></td>
		  <td><select class="form-select" aria-label="Default select example" onchange="onload()">
			<option selected>0</option>
			<option value="1">1 - Satisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Excelente</option>
		</select></td>
		  <td><select class="form-select" aria-label="Default select example" onchange="onload()">
			<option selected>0</option>
			<option value="1">1 - Satisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Excelente</option>
		</select></td>
		  <td><select class="form-select" aria-label="Default select example" onchange="onload()">
			<option selected>0</option>
			<option value="1">1 - Insatisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Eficaz</option>
			<option value="3">4 - Muito eficaz</option>
		</select></td>
		  <td><select class="form-select" aria-label="Default select example">
			<option selected>0</option>
			<option value="1">1 - Insatisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Eficaz</option>
			<option value="3">4 - Muito eficaz</option>
		</select></td>
		  <td class="total-column">0</td>
		  <td class="classification"></td>
		</tr>
		<tr>
		  <td class="name-column">Sara Torres</td>
		  <td><select class="form-select" aria-label="Default select example">
			<option selected value="0">0 - Onze ou mais faltas justificadas</option>
			<option value="1">1 - Até dez faltas justificadas</option>
			<option value="3">3 - Zero faltas justificadas</option>
			</select></td>
		<td><select class="form-select" aria-label="Default select example">
			<option selected value="0">0 - Três  ou mais faltas injustificadas</option>
			<option value="1">1 - Até duas faltas injustificadas</option>
			<option value="3">3 - Zero faltas injustificadas</option>
			</select></td>
		  <td><select class="form-select" aria-label="Default select example">
			<option selected>0</option>
			<option value="1">1 - Satisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Excelente</option>
		</select></td>
		  <td><select class="form-select" aria-label="Default select example">
			<option selected>0</option>
			<option value="1">1 - Satisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Excelente</option>
		</select></td>
		  <td><select class="form-select" aria-label="Default select example">
			<option selected>0</option>
			<option value="1">1 - Insatisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Eficaz</option>
			<option value="3">4 - Muito eficaz</option>
		</select></td>
		  <td><select class="form-select" aria-label="Default select example">
			<option selected>0</option>
			<option value="1">1 - Insatisfatório</option>
			<option value="2">2 - Mediano</option>
			<option value="3">3 - Eficaz</option>
			<option value="3">4 - Muito eficaz</option>
		</select></td>
		  <td class="total-column">0</td>
		  <td class="classification"></td>
		</tr>
		<tr>
			<td class="name-column">Carlos Sousa</td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected value="0">0 - Onze ou mais faltas justificadas</option>
				<option value="1">1 - Até dez faltas justificadas</option>
				<option value="3">3 - Zero faltas justificadas</option>
				</select></td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected value="0">0 - Três  ou mais faltas injustificadas</option>
				<option value="1">1 - Até duas faltas injustificadas</option>
				<option value="3">3 - Zero faltas injustificadas</option>
				</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Satisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Excelente</option>
			</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Satisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Excelente</option>
			</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Insatisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Eficaz</option>
				<option value="3">4 - Muito eficaz</option>
			</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Insatisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Eficaz</option>
				<option value="3">4 - Muito eficaz</option>
			</select></td>
			  <td class="total-column">0</td>
			  <td class="classification"></td>
			</tr>
		  <tr>
			<td class="name-column">Catarina Silva</td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected value="0">0 - Onze ou mais faltas justificadas</option>
				<option value="1">1 - Até dez faltas justificadas</option>
				<option value="3">3 - Zero faltas justificadas</option>
				</select></td>
			<td><select class="form-select" aria-label="Default select example">
				<option selected value="0">0 - Três  ou mais faltas injustificadas</option>
				<option value="1">1 - Até duas faltas injustificadas</option>
				<option value="3">3 - Zero faltas injustificadas</option>
				</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Satisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Excelente</option>
			</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Satisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Excelente</option>
			</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Insatisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Eficaz</option>
				<option value="3">4 - Muito eficaz</option>
			</select></td>
			  <td><select class="form-select" aria-label="Default select example">
				<option selected>0</option>
				<option value="1">1 - Insatisfatório</option>
				<option value="2">2 - Mediano</option>
				<option value="3">3 - Eficaz</option>
				<option value="3">4 - Muito eficaz</option>
			</select></td>
			  <td class="total-column">0</td>
			  <td class="classification"></td>
			</tr>
		<!-- Add more rows for other users here -->
	  </tbody>
	</table>
	<div class="centered-btn">
		<button type="submit" class="btn btn-primary btn-large">Save</button>
		<button type="submit" class="btn btn-success btn-large">Submit</button>
	</div>
	<script>
		$(document).ready(function () {
		  $('.form-select').change(function () {
			var $row = $(this).closest('tr');
			var total = 0;
			$row.find('.form-select').each(function () {
			  total += parseInt($(this).val()) || 0;
			});
			$row.find('.total-column').text(total);
		  });
		
		  function onload() {
			$('tr').each(function () {
			  var $row = $(this);
			  var totalPoints = parseInt($row.find('.total-column').text());
			  var $classification = $row.find('.classification');
		
			  if (totalPoints >= 17) {
				$classification.text('A');
				$classification.css('color', 'green');
			  } else if (totalPoints >= 14) {
				$classification.text('B');
				$classification.css('color', 'blue');
			  } else if (totalPoints >= 10) {
				$classification.text('C');
				$classification.css('color', 'orange');
			  } else {
				$classification.text('D');
				$classification.css('color', 'red');
			  }
			});
		  }
		
		  onload();
		
		  $('select').change(function () {
			onload();
		  });
		});
		</script>
		<style>
			.centered-btn {
				display: flex;
  				justify-content: center;
			}
			.btn-large {
				width: 200px;  /* Adjust as needed */
				height: 50px;  /* Adjust as needed */
				font-size: 20px;  /* Adjust as needed */
				margin: 0 10px;  /* Adjust as needed */
			}
		</style>
{% endblock %}
